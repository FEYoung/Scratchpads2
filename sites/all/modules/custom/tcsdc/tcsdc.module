<?php

/**
 * @file
 * 
 * Provides three additional hooks:
 * 
 * hook_tcsdc_form()
 * hook_tcsdc_help()
 * hook_tcsdc_data_alter()
 */
/**
 * Implementation of hook_ctools_plugin_directory()
 */
function tcsdc_ctools_plugin_directory($module, $plugin){
  switch($module){
    case 'formflow':
      return 'formflow';
  }
}

/**
 * Form definition, as used by the form flow.
 */
function tcsdc_primary_form($form, &$form_state){
  // First, we need to get the TCS form definitions from the respective modules.
  // We do this by getting the tcsdc defintions and looping through each.
  $form = module_invoke_all('tcsdc_form', $form, $form_state);
  return array_merge($form, array(
    '#submit' => array(
      'tcsdc_primary_form_submit'
    )
  ));
}

/**
 * Batch downloader.  This does the recursive downloading of the XML.  The XML
 * is converted and saved in the database, eventually to be output as CSV.
 */
function tcsdc_batch_downloader(){
  
}