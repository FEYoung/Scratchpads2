<?php

/**
 * Implementation of hook_form_FORM_ID_alter.
 * 
 * Hide the forums vocabulary from the taxonomy editor.
 */
function scratchpads_tweaks_form_taxonomy_overview_vocabularies_alter(&$form, &$form_state, $form_id){
  if($tid = variable_get('forum_nav_vocabulary', FALSE)){
    unset($form[$tid]);
  }
}

/**
 * Implements hook_menu_alter().
 */
function scratchpads_tweaks_menu_alter(&$items){
  if(isset($items['node/%node/clone'])){
    $items['node/%node/clone']['type'] = MENU_LOCAL_TASK;
  }
}

/**
 * Implements hook_form_FORM_ID_alter().
 */
function scratchpads_tweaks_form_user_profile_form_alter(&$form, &$form_state, $form_id){
  if(isset($form['account']) && isset($form['account']['roles'])){
    $form['account']['roles']['#description'] = theme('item_list', array(
      'items' => array(
        'Authenticated user: Able to create and edit own forum posts',
        'Contributor: Able to create content and edit own content',
        'Editor: Able to create and edit own content, and also edit other people\'s content',
        'Maintainer: Like editor, but also has administration privileges'
      )
    ));
  }
}

function scratchpads_tweaks_form_user_register_form_alter(&$form, &$form_state, $form_id){
  scratchpads_tweaks_form_user_profile_form_alter($form, $form_state, $form_id);
}

/**
 * Implements hook_system_info_alter().
 */
function scratchpads_tweaks_system_info_alter(&$info, $file, $type){
  switch($file->name){
    case 'webform':
      $info['tool'] = TRUE;
      $info['name'] = 'Webforms';
      $info['description'] = 'Enables the creation of simple online forms. Useful for questionnaires, conference signup, polls, and much more.';
      break;
    case 'views_ui':
      $info['tool'] = TRUE;
      $info['name'] = 'Views';
      $info['description'] = 'Allows you to create custom reports or views of the data held on your Scratchpad';
      break;
    case 'pathauto':
      $info['dependencies'][] = 'redirect';
      $info['tool'] = TRUE;
      $info['name'] = 'Pretty URLs';
      $info['description'] = 'Automatically generates pretty URLs based on the title of the content being edited/created. e.g. A page titled "About this site" will be given the URL content/about-this-site, instead of node/x.';
      break;
    case 'simplenews':
    case 'lexicon':
    case 'googleanalytics':
      $info['tool'] = TRUE;
      break;
  }
}