<?php
include_once ('scratchpads_file_colorboxed.features.inc');

/**
 * Implementation of hook_entity_view_alter().
 */
function scratchpads_file_colorboxed_entity_view_alter(&$build, $type){
  if(isset($_GET['colorbox']) && is_numeric(arg(1))){
    // Prevent a loop!
    unset($_GET['colorbox']);
    $entities = entity_load('file', array(
      arg(1)
    ));
    $content = entity_view('file', $entities, 'file_styles_colorbox');
    echo drupal_render($content);
    exit();
  }
}