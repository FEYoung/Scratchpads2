(function(a){Drupal.gm3=Drupal.gm3||{};Drupal.gm3.convexhull=Drupal.gm3.convexhull||{};Drupal.behaviors.gm3_convexhull={attach:function(b,c){for(map_id in Drupal.settings.gm3.maps){if(Drupal.settings.gm3.maps[map_id]["initialized"]&&Drupal.settings.gm3.maps[map_id]["libraries"]["point"]){Drupal.settings.gm3.maps[map_id]["libraries"]["point"]["finished"]=Drupal.settings.gm3.maps[map_id]["libraries"]["point"]["finished"]||new Array();Drupal.settings.gm3.maps[map_id]["libraries"]["point"]["finished"][Drupal.settings.gm3.maps[map_id]["libraries"]["point"]["finished"].length]=function(d){Drupal.gm3.convexhull.initialize(d)}}}}};Drupal.gm3.convexhull.initialize=function(b){Drupal.settings.gm3.maps[b]["point"]["points"].sort(Drupal.gm3.convexhull.sortPointY);Drupal.settings.gm3.maps[b]["point"]["points"].sort(Drupal.gm3.convexhull.sortPointX);var c=[];Drupal.gm3.convexhull.chainHull_2D(Drupal.settings.gm3.maps[b]["point"]["points"],Drupal.settings.gm3.maps[b]["point"]["points"].length,c);for(i in c){console.log(c[i])}};Drupal.gm3.convexhull.sortPointX=function(d,c){return d.x-c.x};Drupal.gm3.convexhull.sortPointY=function(d,c){return d.y-c.y};Drupal.gm3.convexhull.isLeft=function(c,b,d){return(b.x-c.x)*(d.y-c.y)-(d.x-c.x)*(b.y-c.y)};Drupal.gm3.convexhull.chainHull_2D=function(j,d,m){var k=0,l=(-1);var h;var o=0,e;var c=j[0].x;for(h=1;h<d;h++){if(j[h].x!=c){break}}e=h-1;if(e==d-1){m[++l]=j[o];if(j[e].y!=j[o].y){m[++l]=j[e]}m[++l]=j[o];return l+1}var b,g=d-1;var f=j[d-1].x;for(h=d-2;h>=0;h--){if(j[h].x!=f){break}}b=h+1;m[++l]=j[o];h=e;while(++h<=b){if(Drupal.gm3.convexhull.isLeft(j[o],j[b],j[h])>=0&&h<b){continue}while(l>0){if(Drupal.gm3.convexhull.isLeft(m[l-1],m[l],j[h])>0){break}else{l--}}m[++l]=j[h]}if(g!=b){m[++l]=j[g]}k=l;h=b;while(--h>=e){if(Drupal.gm3.convexhull.isLeft(j[g],j[e],j[h])>=0&&h>e){continue}while(l>k){if(Drupal.gm3.convexhull.isLeft(m[l-1],m[l],j[h])>0){break}else{l--}}m[++l]=j[h]}if(e!=o){m[++l]=j[o]}return l+1}})(jQuery);var gmarkers=[];var points=[];var hullPoints=[];var map;var polyline;